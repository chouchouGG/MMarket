24-06-23.09:38:26.724 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 28112 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.09:38:26.725 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.09:38:28.432 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.09:38:28.436 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.09:38:28.491 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-06-23.09:38:32.406 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.09:38:34.321 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:38:34.577 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:38:38.613 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.09:38:38.745 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 12.85 seconds (JVM running for 14.843)
24-06-23.09:38:40.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:38:40.974 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.09:38:41.816 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.09:38:42.064 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:38:42.397 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:38:42.399 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：4050
24-06-23.09:38:42.400 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.09:38:42.602 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.09:38:42.637 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.09:38:42.637 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.09:38:42.637 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.09:38:42.638 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.09:38:42.638 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.09:38:42.638 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.09:38:42.638 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.09:38:42.638 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.09:38:42.709 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.09:38:42.709 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.09:38:42.735 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为4050，将采取权重规则：4000:102,103,104,105
24-06-23.09:38:42.795 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：105 执行状态：TERMINATED 结果描述：参与权重抽奖，直接返回
24-06-23.09:38:42.795 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: rule_weight 处理状态: 【终止处理流程】 结果描述: 参与权重抽奖，直接返回
24-06-23.09:38:42.796 [main            ] INFO  DefaultRaffleStrategy  - 流程状态为TERMINATED，无需进行决策树流程
24-06-23.09:38:42.796 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: rule_weight 处理状态: 【终止处理流程】 结果描述: 参与权重抽奖，直接返回
24-06-23.09:38:42.801 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":105}
24-06-23.09:38:42.801 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.09:38:42.828 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.09:38:42.829 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.09:38:42.829 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.09:38:42.858 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.09:38:42.858 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.09:38:42.885 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为4050，将采取权重规则：4000:102,103,104,105
24-06-23.09:38:42.945 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：102 执行状态：TERMINATED 结果描述：参与权重抽奖，直接返回
24-06-23.09:38:42.945 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: rule_weight 处理状态: 【终止处理流程】 结果描述: 参与权重抽奖，直接返回
24-06-23.09:38:42.945 [main            ] INFO  DefaultRaffleStrategy  - 流程状态为TERMINATED，无需进行决策树流程
24-06-23.09:38:42.945 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: rule_weight 处理状态: 【终止处理流程】 结果描述: 参与权重抽奖，直接返回
24-06-23.09:38:42.946 [main            ] INFO  RaffleStrategyTest     - 第1次测试结果：{"awardId":102}
24-06-23.09:38:43.017 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.09:38:43.164 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.09:45:22.225 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 6636 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.09:45:22.245 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.09:45:23.778 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.09:45:23.782 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.09:45:23.825 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
24-06-23.09:45:26.892 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.09:45:28.515 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:45:28.778 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:45:33.105 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.09:45:33.210 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.762 seconds (JVM running for 12.99)
24-06-23.09:45:34.500 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.09:45:35.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:45:35.310 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.09:45:35.600 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:45:35.856 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:45:35.858 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.09:45:35.858 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.09:45:36.077 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.09:45:36.120 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.09:45:36.120 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.09:45:36.211 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.09:45:36.211 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.09:45:36.243 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.09:45:36.244 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.09:45:36.244 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.09:45:36.303 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:45:36.303 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:45:36.303 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.09:45:36.336 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_random,rule_luck_award
24-06-23.09:45:36.336 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.09:45:36.336 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.09:45:36.337 [main            ] INFO  DefaultTreeFactory     - warn: 未定义规则【rule_random】对应的决策树节点
24-06-23.09:45:36.409 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.09:45:36.557 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.09:51:58.020 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 33532 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.09:51:58.023 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.09:51:59.450 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.09:51:59.458 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.09:51:59.546 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 0 Redis repository interfaces.
24-06-23.09:52:02.876 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.09:52:04.537 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:52:04.789 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:52:09.098 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.09:52:09.198 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.743 seconds (JVM running for 20.076)
24-06-23.09:52:10.052 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:52:10.949 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.09:52:12.403 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.09:52:12.657 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:52:12.928 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:52:12.930 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.09:52:12.930 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.09:52:13.129 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.09:52:13.162 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.09:52:13.162 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.09:52:13.163 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.09:52:13.163 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.09:52:13.163 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.09:52:13.163 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.09:52:13.163 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.09:52:13.163 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.09:52:13.252 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.09:52:13.252 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.09:52:13.280 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.09:52:13.281 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.09:52:13.281 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.09:52:13.341 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:52:13.342 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:52:13.342 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.09:52:13.373 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_luck_award
24-06-23.09:52:13.373 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.09:52:13.373 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.09:52:13.374 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.09:52:13.375 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.09:52:13.376 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.09:52:13.376 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.09:52:13.452 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.09:52:13.648 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.09:56:12.417 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 19336 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.09:56:12.420 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.09:56:13.892 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.09:56:13.898 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.09:56:13.961 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 0 Redis repository interfaces.
24-06-23.09:56:17.273 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.09:56:18.940 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:56:19.198 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.09:56:22.957 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.09:56:23.090 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.43 seconds (JVM running for 13.138)
24-06-23.09:56:24.378 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.09:56:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:56:25.131 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.09:56:25.385 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:56:25.629 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.09:56:25.631 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.09:56:25.631 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.09:56:25.818 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.09:56:25.851 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.09:56:25.851 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.09:56:25.933 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.09:56:25.933 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.09:56:25.964 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.09:56:25.964 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.09:56:25.964 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.09:56:26.027 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:56:26.027 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.09:56:26.027 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.09:56:26.058 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.09:56:26.058 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.09:56:26.058 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.09:56:26.059 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.09:56:26.059 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.09:56:26.059 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.09:56:26.059 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.09:56:26.059 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.09:56:26.060 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.09:56:26.060 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.09:56:26.060 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.09:56:26.060 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.09:56:26.060 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.09:56:26.061 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.09:56:26.061 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.09:56:26.061 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.09:57:04.025 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:57:12.564 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:57:44.136 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.09:57:44.161 [scheduling-1    ] ERROR TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'redissonConnectionFactory': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$1.orderedStream(DefaultListableBeanFactory.java:481)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:167)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.learn.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$e181ec2d.takeQueueValue(<generated>)
	at cn.learn.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:62)
	at cn.learn.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:25)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-06-23.09:57:44.226 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.09:57:44.408 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:00:44.955 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 23792 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:00:44.958 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:00:46.733 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:00:46.742 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:00:46.812 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
24-06-23.10:00:50.089 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:00:51.851 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:00:52.117 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:00:56.193 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:00:56.316 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 12.354 seconds (JVM running for 14.155)
24-06-23.10:00:57.530 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:00:58.309 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:00:58.572 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:00:58.839 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:00:58.841 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:00:58.841 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:01:40.031 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:04:39.261 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:04:39.262 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m59s230ms333µs300ns).
24-06-23.10:04:39.360 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:04:39.464 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:04:39.606 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:04:50.126 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 31576 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:04:50.129 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:04:51.538 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:04:51.543 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:04:51.593 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-06-23.10:04:54.664 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:04:56.130 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:04:56.367 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:04:59.922 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:05:00.056 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.798 seconds (JVM running for 12.491)
24-06-23.10:05:01.518 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:05:02.255 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:05:02.517 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:05:03.012 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:05:03.015 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:05:03.015 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:05:10.815 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:05:10.997 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:05:11.029 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:05:11.029 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:05:11.030 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:05:11.030 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:05:11.030 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:05:11.030 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:05:11.030 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:05:11.030 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:05:11.113 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:05:11.113 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:05:11.140 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:05:11.140 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:05:11.140 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:05:11.198 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:05:11.198 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:05:11.198 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.10:05:11.226 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.10:05:11.226 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:05:11.226 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:05:11.227 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:05:11.228 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:05:11.228 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:05:11.231 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:08:33.427 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:08:33.431 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m31s64ms625µs100ns).
24-06-23.10:08:33.457 [scheduling-1    ] ERROR TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'redissonConnectionFactory': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$1.orderedStream(DefaultListableBeanFactory.java:481)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:167)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.learn.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$e181ec2d.takeQueueValue(<generated>)
	at cn.learn.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:62)
	at cn.learn.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:25)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-06-23.10:08:33.516 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:08:33.756 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:14:21.508 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 18120 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:14:21.510 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:14:22.769 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:14:22.773 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:14:22.816 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
24-06-23.10:14:25.857 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:14:27.389 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:14:27.623 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:14:31.012 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:14:31.105 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.462 seconds (JVM running for 11.833)
24-06-23.10:14:32.233 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:14:32.902 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:14:33.152 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:14:33.401 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:14:33.403 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:14:33.403 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:14:33.567 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"user003"}
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:14:33.598 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:14:33.598 [main            ] INFO  BlackListLogicChain    - 用户【user003】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:14:33.669 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：100 执行状态：TERMINATED 结果描述：用户在黑名单中
24-06-23.10:14:33.670 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: user003 策略ID: 100001 奖品ID: 100 规则模型: rule_blacklist 处理状态: 【终止处理流程】 结果描述: 用户在黑名单中
24-06-23.10:14:33.670 [main            ] INFO  DefaultRaffleStrategy  - 流程状态为TERMINATED，无需进行决策树流程
24-06-23.10:14:33.670 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: user003 策略ID: 100001 奖品ID: 100 规则模型: rule_blacklist 处理状态: 【终止处理流程】 结果描述: 用户在黑名单中
24-06-23.10:14:33.674 [main            ] INFO  RaffleStrategyTest     - 测试结果：{"awardId":100}
24-06-23.10:14:33.746 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:14:33.853 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:15:27.101 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 33728 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:15:27.104 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:15:28.398 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:15:28.402 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:15:28.449 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
24-06-23.10:15:31.599 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:15:33.294 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:15:33.557 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:15:36.978 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:15:37.110 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.551 seconds (JVM running for 11.74)
24-06-23.10:15:38.985 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:15:39.669 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:15:39.928 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:15:40.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:15:40.174 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:15:40.176 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:15:40.176 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:15:40.351 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:15:40.382 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:15:40.383 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:15:40.466 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:15:40.467 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:15:40.496 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:15:40.497 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:15:40.497 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:15:40.561 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：107 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:15:40.561 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 107 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:15:40.561 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：107
24-06-23.10:15:40.593 [main            ] INFO  DefaultTreeFactory     - 当前奖品【107】的规则列表为：rule_lock,rule_luck_award
24-06-23.10:15:40.594 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:15:40.594 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_lock 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:15:40.595 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:15:40.596 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:15:40.598 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:15:40.599 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:15:40.674 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:15:40.930 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:18:06.588 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 22060 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:18:06.590 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:18:07.838 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:18:07.843 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:18:07.888 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
24-06-23.10:18:11.053 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:18:12.554 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:18:12.832 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:18:16.910 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:18:17.846 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.819 seconds (JVM running for 13.027)
24-06-23.10:18:19.057 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:18:19.857 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:18:20.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:18:21.093 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:18:21.614 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:18:21.616 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:18:21.616 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:18:21.769 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:18:21.813 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:18:21.813 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:18:21.864 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:18:21.864 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:18:21.892 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:18:21.892 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:18:21.893 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:18:21.954 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:18:21.954 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:18:21.956 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.10:18:21.983 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_luck_award
24-06-23.10:18:21.983 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:18:21.983 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:18:21.984 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:18:21.985 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:18:21.985 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:18:21.985 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:18:22.062 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:18:22.311 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:21:26.513 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 29932 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:21:26.528 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:21:28.066 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:21:28.080 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:21:28.130 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-06-23.10:21:31.233 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:21:32.814 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:21:33.088 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:21:36.790 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:21:36.926 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.257 seconds (JVM running for 12.97)
24-06-23.10:21:38.151 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:21:38.815 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:21:39.072 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:21:39.336 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:21:39.337 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:21:39.338 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:21:39.525 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:21:39.566 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:21:39.566 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:21:39.632 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:21:39.632 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:21:39.656 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:21:39.656 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:21:39.656 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:21:39.714 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:21:39.714 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:21:39.714 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.10:21:39.738 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.10:21:39.738 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:21:39.738 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:21:39.739 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:21:39.740 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:21:39.740 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:21:39.740 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:21:39.824 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:21:40.057 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:27:08.431 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 22848 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:27:08.433 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:27:09.658 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:27:09.662 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:27:09.705 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
24-06-23.10:27:12.753 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:27:14.208 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:27:14.446 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:27:18.628 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:27:19.386 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.493 seconds (JVM running for 12.685)
24-06-23.10:27:20.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:27:20.740 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:27:21.941 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:27:22.268 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:27:22.539 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:27:22.543 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:27:22.543 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:27:22.935 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:27:22.974 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:27:22.975 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:27:23.091 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:27:23.092 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:27:23.125 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:27:23.125 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:27:23.125 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:27:23.184 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:27:23.185 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:27:23.185 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.10:27:23.221 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_luck_award
24-06-23.10:27:23.221 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:27:23.221 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:27:23.223 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:27:23.223 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:27:23.223 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:27:23.223 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:27:23.223 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:27:23.224 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:27:23.224 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:27:23.224 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:27:23.224 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:27:23.224 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:27:23.225 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:27:23.226 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:27:23.226 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:27:23.359 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:27:23.543 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.10:50:31.579 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 9056 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.10:50:31.580 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.10:50:33.017 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.10:50:33.025 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.10:50:33.077 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-06-23.10:50:36.778 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.10:50:38.469 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:50:38.726 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.10:50:42.442 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.10:50:42.584 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.676 seconds (JVM running for 13.591)
24-06-23.10:50:44.104 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.10:50:44.952 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.10:50:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:50:45.231 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:50:45.500 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.10:50:45.503 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.10:50:45.503 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.10:50:45.708 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:50:45.738 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:50:45.739 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:50:45.739 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:50:45.824 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:50:45.824 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:50:45.858 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:50:45.859 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:50:45.859 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:50:45.923 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:50:45.923 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:50:45.923 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.10:50:45.957 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.10:50:45.957 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:50:45.958 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:50:45.959 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:50:45.962 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:50:45.965 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:50:45.966 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:50:53.639 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:50:53.781 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：102 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.10:50:53.849 [main            ] INFO  RuleLuckAwardNode      - 抽奖决策树-【兜底奖励节点】 规则模型：rule_luck_award 奖品ID：101 执行状态：TERMINATED 结果描述：发放兜底奖品，处理流程终止
24-06-23.10:50:53.849 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_luck_award 处理结果信息: 【终止处理流程】
24-06-23.10:50:53.849 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: rule_luck_award 处理状态: 【终止处理流程】 结果描述: 发放兜底奖品，处理流程终止
24-06-23.10:50:53.855 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":101}
24-06-23.10:50:53.855 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.10:50:53.887 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.10:50:53.888 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.10:50:53.888 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.10:50:53.921 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.10:50:53.921 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.10:50:53.954 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.10:50:53.954 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.10:50:53.954 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.10:50:54.009 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:50:54.009 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.10:50:54.009 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_luck_award
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.10:50:54.042 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.10:50:54.042 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:50:54.043 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.10:50:54.043 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.10:50:59.887 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:50:59.970 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：101 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.10:51:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.10:51:00.039 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:102
24-06-23.10:51:00.039 [main            ] INFO  RuleLuckAwardNode      - 抽奖决策树-【兜底奖励节点】 规则模型：rule_luck_award 奖品ID：101 执行状态：TERMINATED 结果描述：发放兜底奖品，处理流程终止
24-06-23.10:51:00.039 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_luck_award 处理结果信息: 【终止处理流程】
24-06-23.10:51:00.039 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: rule_luck_award 处理状态: 【终止处理流程】 结果描述: 发放兜底奖品，处理流程终止
24-06-23.10:51:00.039 [main            ] INFO  RaffleStrategyTest     - 第1次测试结果：{"awardId":101}
24-06-23.10:51:00.139 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.10:51:00.369 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.11:34:43.047 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 33396 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.11:34:43.048 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.11:34:44.187 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.11:34:44.192 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.11:34:44.256 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 0 Redis repository interfaces.
24-06-23.11:34:47.382 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.11:34:49.062 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.11:34:49.322 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.11:34:52.697 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.11:34:53.005 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.445 seconds (JVM running for 15.366)
24-06-23.11:34:54.472 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.11:34:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.11:34:55.268 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.11:34:55.515 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.11:34:55.781 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.11:34:55.783 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.11:34:55.783 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.11:34:55.937 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.11:34:55.967 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.11:34:55.967 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.11:34:55.967 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.11:34:55.968 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.11:34:55.968 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.11:34:55.968 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.11:34:55.968 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.11:34:55.968 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.11:34:56.061 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.11:34:56.061 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.11:34:56.095 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.11:34:56.095 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.11:34:56.095 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.11:34:56.170 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：103 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:34:56.171 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 103 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:34:56.171 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：103
24-06-23.11:34:56.218 [main            ] INFO  DefaultTreeFactory     - 当前奖品【103】的规则列表为：rule_luck_award
24-06-23.11:34:56.218 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.11:34:56.218 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.11:34:56.219 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.11:34:56.220 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:34:56.220 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:34:56.220 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.11:34:56.364 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：103 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.11:34:56.364 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.11:34:56.364 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 103 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.11:34:56.374 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":103}
24-06-23.11:34:56.374 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.11:34:56.408 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.11:34:56.408 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.11:34:56.408 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.11:34:56.408 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.11:34:56.408 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.11:34:56.409 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.11:34:56.409 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.11:34:56.409 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.11:34:56.444 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.11:34:56.444 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.11:34:56.477 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.11:34:56.477 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.11:34:56.477 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.11:34:56.538 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：104 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:34:56.538 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 104 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:34:56.538 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：104
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 当前奖品【104】的规则列表为：rule_luck_award
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.11:34:56.572 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.11:34:56.573 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.11:34:56.573 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.11:34:56.573 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：104 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:34:56.573 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：104 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:34:56.573 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：104 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.11:34:56.660 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：104 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.11:34:56.660 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.11:34:56.660 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 104 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.11:34:56.660 [main            ] INFO  RaffleStrategyTest     - 第1次测试结果：{"awardId":104}
24-06-23.11:34:56.726 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.11:34:57.275 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.11:53:03.542 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 21224 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.11:53:03.544 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.11:53:04.894 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.11:53:04.908 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.11:53:04.963 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-06-23.11:53:08.058 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.11:53:09.779 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.11:53:10.030 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.11:53:14.070 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.11:53:14.239 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.379 seconds (JVM running for 13.004)
24-06-23.11:53:15.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.11:53:15.373 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:101
24-06-23.11:53:15.469 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.11:53:16.603 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.11:53:16.943 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.11:53:17.454 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.11:53:17.455 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.11:53:17.456 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.11:53:17.667 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.11:53:17.707 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.11:53:17.708 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.11:53:17.790 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.11:53:17.790 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.11:53:17.819 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.11:53:17.820 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.11:53:17.820 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.11:53:17.881 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：105 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:53:17.881 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:53:17.881 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：105
24-06-23.11:53:17.912 [main            ] INFO  DefaultTreeFactory     - 当前奖品【105】的规则列表为：rule_luck_award
24-06-23.11:53:17.912 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.11:53:17.912 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.11:53:17.913 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.11:53:17.913 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:53:17.914 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:53:17.914 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.11:53:18.068 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：105 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.11:53:18.068 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.11:53:18.068 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.11:53:18.072 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":105}
24-06-23.11:53:18.072 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.11:53:18.104 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.11:53:18.105 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.11:53:18.105 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.11:53:18.135 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.11:53:18.135 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.11:53:18.165 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.11:53:18.165 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.11:53:18.165 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.11:53:18.224 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:53:18.224 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.11:53:18.224 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.11:53:18.255 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.11:53:18.255 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.11:53:18.255 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.11:53:18.256 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.11:53:18.256 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:53:18.256 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.11:53:18.256 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.11:53:18.344 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：102 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.11:53:18.344 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.11:53:18.344 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.11:53:18.344 [main            ] INFO  RaffleStrategyTest     - 第1次测试结果：{"awardId":102}
24-06-23.11:53:20.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.11:53:20.049 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:103
24-06-23.11:53:25.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.11:53:25.043 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:104
24-06-23.11:53:28.426 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.11:53:28.845 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.12:02:53.748 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 5520 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.12:02:53.749 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.12:02:54.991 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.12:02:54.994 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.12:02:55.044 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-06-23.12:02:58.044 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.12:02:59.479 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.12:02:59.744 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.12:03:03.279 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.12:03:03.904 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.769 seconds (JVM running for 11.958)
24-06-23.12:03:05.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:03:05.054 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:105
24-06-23.12:03:05.081 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.12:03:05.736 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.12:03:06.026 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.12:03:06.267 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.12:03:06.269 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.12:03:06.269 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.12:03:06.447 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.12:03:06.487 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.12:03:06.488 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.12:03:06.488 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.12:03:06.558 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.12:03:06.558 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.12:03:06.583 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.12:03:06.584 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.12:03:06.584 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.12:03:06.654 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.12:03:06.654 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.12:03:06.655 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.12:03:06.680 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.12:03:06.680 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.12:03:06.680 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.12:03:06.681 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.12:03:06.682 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.12:03:06.682 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.12:03:06.682 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.12:03:06.825 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：102 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.12:03:06.825 [main            ] INFO  RuleLuckAwardNode      - 抽奖决策树-【兜底奖励节点】 规则模型：rule_luck_award 奖品ID：102 执行状态：CONTINUE 结果描述：不需要走兜底处理
24-06-23.12:03:06.825 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_luck_award 处理结果信息: 【继续处理流程】
24-06-23.12:03:06.825 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: rule_luck_award 处理状态: 【继续处理流程】 结果描述: 不需要走兜底处理
24-06-23.12:03:06.830 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":102}
24-06-23.12:03:10.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:03:10.031 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:102
24-06-23.12:03:15.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:03:15.042 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:102
24-06-23.12:03:16.908 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.12:03:17.314 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.12:07:14.192 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 9908 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.12:07:14.194 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.12:07:15.416 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.12:07:15.420 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.12:07:15.467 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
24-06-23.12:07:18.491 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.12:07:20.082 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.12:07:20.340 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.12:07:23.847 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.12:07:23.971 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.3 seconds (JVM running for 11.519)
24-06-23.12:07:25.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:07:25.230 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.12:07:26.112 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.12:07:27.217 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.12:07:27.655 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.12:07:27.657 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.12:07:27.657 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.12:07:27.839 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.12:07:27.873 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.12:07:27.873 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.12:07:27.936 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.12:07:27.936 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.12:07:27.964 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.12:07:27.964 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.12:07:27.964 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.12:07:28.022 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：102 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.12:07:28.022 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.12:07:28.022 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：102
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 当前奖品【102】的规则列表为：rule_luck_award
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.12:07:28.055 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.12:07:28.056 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.12:07:28.056 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.12:07:28.056 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.12:07:28.056 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.12:07:28.056 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.12:07:28.056 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.12:07:28.056 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：102 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.12:07:28.198 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：102 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.12:07:28.198 [main            ] INFO  RuleLuckAwardNode      - 抽奖决策树-【兜底奖励节点】 规则模型：rule_luck_award 奖品ID：102 执行状态：CONTINUE 结果描述：不需要走兜底处理
24-06-23.12:07:28.200 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_luck_award 处理结果信息: 【继续处理流程】
24-06-23.12:07:28.200 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 102 规则模型: rule_luck_award 处理状态: 【继续处理流程】 结果描述: 不需要走兜底处理
24-06-23.12:07:28.205 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":102}
24-06-23.12:07:30.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:07:35.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，延迟队列获取，降低对数据库的更新频次，减少连接占用
24-06-23.12:07:35.038 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存 strategyId:100001 awardId:102
24-06-23.12:07:38.291 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.12:07:38.718 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.13:30:01.981 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 22968 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.13:30:01.983 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.13:30:03.300 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.13:30:03.308 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.13:30:03.362 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-06-23.13:30:07.067 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.13:30:08.764 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:30:09.007 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:30:12.709 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.13:30:12.825 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 11.5 seconds (JVM running for 13.362)
24-06-23.13:30:13.674 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.13:30:14.759 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.13:30:15.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:30:15.109 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:30:16.080 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:30:16.535 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:30:16.536 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.13:30:16.536 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.13:30:16.718 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.13:30:16.758 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.13:30:16.758 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.13:30:16.758 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.13:30:16.758 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.13:30:16.758 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.13:30:16.759 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.13:30:16.759 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.13:30:16.759 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.13:30:16.808 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.13:30:16.808 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.13:30:16.841 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.13:30:16.841 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.13:30:16.841 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.13:30:16.897 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：101 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:30:16.897 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:30:16.897 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：101
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 当前奖品【101】的规则列表为：rule_luck_award
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.13:30:16.930 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.13:30:16.932 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.13:30:16.932 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.13:30:16.932 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:30:16.932 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:30:16.932 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：101 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.13:30:17.062 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：101 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.13:30:17.062 [main            ] INFO  RuleLuckAwardNode      - 不需要走兜底处理
24-06-23.13:30:17.062 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.13:30:17.062 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 101 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.13:30:17.067 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":101}
24-06-23.13:30:20.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:30:20.038 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:30:25.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:30:25.035 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，strategyId: 100001 awardId: 101
24-06-23.13:30:25.138 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 完成奖品消耗库存更新，strategyId: 100001 awardId: 101
24-06-23.13:30:27.134 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.13:30:27.567 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.13:33:07.094 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 8036 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.13:33:07.095 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.13:33:08.646 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.13:33:08.651 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.13:33:08.699 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
24-06-23.13:33:11.994 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.13:33:13.426 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:33:13.701 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:33:16.868 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.13:33:16.977 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.551 seconds (JVM running for 11.772)
24-06-23.13:33:18.553 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.13:33:19.261 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.13:33:19.519 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:33:19.767 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:33:19.769 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.13:33:19.769 [main            ] INFO  RaffleStrategyTest     - 当前用户次数为：1
24-06-23.13:33:19.955 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.13:33:19.989 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.13:33:19.990 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.13:33:19.990 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.13:33:20.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:33:20.041 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:33:20.062 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.13:33:20.062 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.13:33:20.091 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.13:33:20.091 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.13:33:20.091 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.13:33:20.149 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：107 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:33:20.150 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 107 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:33:20.151 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：107
24-06-23.13:33:20.178 [main            ] INFO  DefaultTreeFactory     - 当前奖品【107】的规则列表为：rule_lock,rule_luck_award
24-06-23.13:33:20.178 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.13:33:20.178 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_lock 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.13:33:20.179 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.13:33:20.182 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:33:20.183 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:33:20.183 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：107 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.13:33:20.326 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：107 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.13:33:20.430 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.13:33:20.578 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.13:37:39.077 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 776 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.13:37:39.078 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.13:37:40.245 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.13:37:40.251 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.13:37:40.295 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-06-23.13:37:42.899 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.13:37:44.456 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:37:44.744 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:37:48.352 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.13:37:48.449 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 9.896 seconds (JVM running for 11.062)
24-06-23.13:37:50.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:37:50.040 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:37:50.098 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.13:37:50.849 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.13:37:51.101 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:37:51.392 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:37:51.394 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.13:37:51.394 [main            ] INFO  RaffleStrategyTest     - 当前用户抽奖次数为：1
24-06-23.13:37:51.533 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.13:37:51.566 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.13:37:51.566 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.13:37:51.645 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.13:37:51.645 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.13:37:51.677 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.13:37:51.677 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.13:37:51.677 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.13:37:51.730 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：103 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:37:51.730 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 103 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:37:51.730 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：103
24-06-23.13:37:51.764 [main            ] INFO  DefaultTreeFactory     - 当前奖品【103】的规则列表为：rule_luck_award
24-06-23.13:37:51.764 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.13:37:51.764 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.13:37:51.765 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.13:37:51.766 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:37:51.766 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:37:51.766 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：103 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.13:37:51.900 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：103 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.13:37:51.902 [main            ] INFO  RuleLuckAwardNode      - 不需要走兜底处理
24-06-23.13:37:51.902 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.13:37:51.902 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 103 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.13:37:51.906 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":103}
24-06-23.13:37:55.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:37:55.036 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，strategyId: 100001 awardId: 107
24-06-23.13:37:55.139 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 完成奖品消耗库存更新，strategyId: 100001 awardId: 107
24-06-23.13:38:00.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:38:00.040 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，strategyId: 100001 awardId: 103
24-06-23.13:38:00.172 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 完成奖品消耗库存更新，strategyId: 100001 awardId: 103
24-06-23.13:38:01.997 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.13:38:02.444 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.13:42:59.623 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 24828 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.13:42:59.625 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.13:43:00.840 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.13:43:00.844 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.13:43:00.892 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-06-23.13:43:03.799 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.13:43:05.472 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:43:05.718 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:43:08.871 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.13:43:08.975 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 9.934 seconds (JVM running for 11.375)
24-06-23.13:43:10.023 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:43:10.111 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:43:10.807 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.13:43:11.585 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.13:43:11.863 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:43:12.115 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:43:12.117 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.13:43:12.117 [main            ] INFO  RaffleStrategyTest     - 当前用户抽奖次数为：1
24-06-23.13:43:12.283 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.13:43:12.322 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.13:43:12.323 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.13:43:12.413 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.13:43:12.413 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.13:43:12.463 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.13:43:12.463 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.13:43:12.463 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.13:43:12.517 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：106 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:43:12.517 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 106 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:43:12.517 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：106
24-06-23.13:43:12.555 [main            ] INFO  DefaultTreeFactory     - 当前奖品【106】的规则列表为：rule_luck_award
24-06-23.13:43:12.555 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.13:43:12.555 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.13:43:12.557 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.13:43:12.558 [main            ] INFO  DailyLimitNode         - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_daily_limit】
24-06-23.13:43:12.559 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：106 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:43:12.559 [main            ] INFO  WinFrequencyNode       - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_win_frequency】
24-06-23.13:43:12.559 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：106 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:43:12.561 [main            ] INFO  PrizeTypeRestrictionNode - 用户【joyboy】，参与抽奖活动【100001】，进行【prize_type_restriction】
24-06-23.13:43:12.561 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：106 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.13:43:12.695 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：106 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.13:43:12.695 [main            ] INFO  RuleLuckAwardNode      - 不需要走兜底处理
24-06-23.13:43:12.695 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.13:43:12.695 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 106 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.13:43:12.704 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":106}
24-06-23.13:43:15.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:43:15.038 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:43:20.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:43:20.033 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，strategyId: 100001 awardId: 106
24-06-23.13:43:20.137 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 完成奖品消耗库存更新，strategyId: 100001 awardId: 106
24-06-23.13:43:22.786 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.13:43:23.206 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
24-06-23.13:48:31.640 [main            ] INFO  RaffleStrategyTest     - Starting RaffleStrategyTest using Java 1.8.0_402 on wyh-machine with PID 24552 (started by 98389 in E:\Java_code\MMarket\MMarket-app)
24-06-23.13:48:31.643 [main            ] INFO  RaffleStrategyTest     - The following 1 profile is active: "dev"
24-06-23.13:48:33.069 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-06-23.13:48:33.078 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-06-23.13:48:33.127 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-06-23.13:48:36.193 [main            ] INFO  Version                - Redisson 3.23.4
24-06-23.13:48:37.668 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:48:37.983 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.77.81/117.72.77.81:16379
24-06-23.13:48:41.263 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-06-23.13:48:41.411 [main            ] INFO  RaffleStrategyTest     - Started RaffleStrategyTest in 10.543 seconds (JVM running for 12.198)
24-06-23.13:48:43.349 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-06-23.13:48:44.099 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-06-23.13:48:44.362 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:48:44.604 [main            ] INFO  RaffleStrategyTest     - 策略装配结果：true
24-06-23.13:48:44.605 [main            ] INFO  RaffleStrategyTest     - 当前用户幸运值为：100
24-06-23.13:48:44.605 [main            ] INFO  RaffleStrategyTest     - 当前用户抽奖次数为：1
24-06-23.13:48:44.808 [main            ] INFO  RaffleStrategyTest     - 请求参数：{"strategyId":100001,"userId":"joyboy"}
24-06-23.13:48:44.837 [main            ] INFO  DefaultChainFactory    - 策略ID：100001 的规则模型为：[rule_blacklist, rule_weight]
24-06-23.13:48:44.837 [main            ] INFO  DefaultChainFactory    - >>>>>>>>>>>>>>>>>>>>开始为策略ID：100001 构建责任链
24-06-23.13:48:44.837 [main            ] INFO  DefaultChainFactory    - 按照配置顺序装填用户配置的责任链
24-06-23.13:48:44.837 [main            ] INFO  DefaultChainFactory    - 	初始化责任链节点：rule_blacklist
24-06-23.13:48:44.837 [main            ] INFO  DefaultChainFactory    - 添加责任链节点：rule_weight
24-06-23.13:48:44.838 [main            ] INFO  DefaultChainFactory    - 	添加默认责任链节点：default
24-06-23.13:48:44.838 [main            ] INFO  DefaultChainFactory    - <<<<<<<<<<<<<<<<<<<<责任链构建完成
24-06-23.13:48:44.838 [main            ] INFO  BlackListLogicChain    - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_blacklist】
24-06-23.13:48:44.931 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-【黑名单节点】 规则模型：rule_blacklist 奖品ID：null 执行状态：CONTINUE 结果描述：用户不在黑名单中
24-06-23.13:48:44.932 [main            ] INFO  RuleWeightLogicChain   - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_weight】
24-06-23.13:48:44.968 [main            ] INFO  RuleWeightLogicChain   - 当前用户的积分为100，将采取权重规则：null
24-06-23.13:48:44.969 [main            ] INFO  RuleWeightLogicChain   - 抽奖责任链-【权重规则节点】 规则模型：rule_weight 奖品ID：null 执行状态：CONTINUE 结果描述：没有参与权重抽奖
24-06-23.13:48:44.969 [main            ] INFO  DefaultLogicChain      - 用户【joyboy】，参与抽奖活动【100001】，进行【default】
24-06-23.13:48:45.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:48:45.031 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-【默认抽奖节点】 规则模型：default 奖品ID：105 执行状态：CONTINUE 结果描述：用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:48:45.032 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: default 处理状态: 【继续处理流程】 结果描述: 用户参与默认抽奖规则，从默认的奖品规则中抽取奖品
24-06-23.13:48:45.032 [main            ] INFO  DefaultTreeFactory     - 开始获取策略奖品配置的抽奖规则，策略ID：100001，奖品ID：105
24-06-23.13:48:45.035 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 当前奖品【105】的规则列表为：rule_luck_award
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 开始构建决策树>>>>>>>>>>>>>>>>
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 开始构建用户属性验证组
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 DailyLimitNode 节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	用户属性验证组添加 WinFrequencyNode 节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 开始构建奖品属性验证组
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 PrizeTypeRestrictionNode 节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 RuleStockNode 节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	奖品属性验证组添加 rule_luck_award 节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 开始构建根节点
24-06-23.13:48:45.067 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->用户属性验证组
24-06-23.13:48:45.068 [main            ] INFO  DefaultTreeFactory     - 	根节点添加->奖品属性验证组
24-06-23.13:48:45.068 [main            ] INFO  DefaultTreeFactory     - <<<<<<<<<<<<<<<<<<<<构建决策树完成
24-06-23.13:48:45.068 [main            ] INFO  DailyLimitNode         - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_daily_limit】
24-06-23.13:48:45.068 [main            ] INFO  DailyLimitNode         - 抽奖决策树-【每日限额节点】 规则模型：rule_daily_limit 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:48:45.068 [main            ] INFO  WinFrequencyNode       - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_win_frequency】
24-06-23.13:48:45.068 [main            ] INFO  WinFrequencyNode       - 抽奖决策树-【中奖频率节点】 规则模型：rule_win_frequency 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，默认通过【CONTINUE】
24-06-23.13:48:45.068 [main            ] INFO  PrizeTypeRestrictionNode - 用户【joyboy】，参与抽奖活动【100001】，进行【prize_type_restriction】
24-06-23.13:48:45.070 [main            ] INFO  PrizeTypeRestrictionNode - 抽奖决策树-【奖品类型限制节点】 规则模型：prize_type_restriction 奖品ID：105 执行状态：CONTINUE 结果描述：暂未实现，现阶段未编写具体逻辑，默认通过【Continue】
24-06-23.13:48:45.071 [main            ] INFO  RuleStockNode          - 用户【joyboy】，参与抽奖活动【100001】，进行【rule_stock】
24-06-23.13:48:45.207 [main            ] INFO  RuleStockNode          - 抽奖决策树-【库存扣减节点】 规则模型：rule_stock 奖品ID：105 执行状态：CONTINUE 结果描述：奖品库存数量足够，库存扣减成功
24-06-23.13:48:45.207 [main            ] INFO  RuleLuckAwardNode      - 不需要走兜底处理
24-06-23.13:48:45.207 [main            ] INFO  RuleDecisionTreeEngine - 最终决策树节点：rule_stock 处理结果信息: 【继续处理流程】
24-06-23.13:48:45.207 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树：用户ID: joyboy 策略ID: 100001 奖品ID: 105 规则模型: rule_stock 处理状态: 【继续处理流程】 结果描述: 奖品库存数量足够，库存扣减成功
24-06-23.13:48:45.211 [main            ] INFO  RaffleStrategyTest     - 第0次测试结果：{"awardId":105}
24-06-23.13:48:50.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:48:50.045 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 更新奖品消耗库存，strategyId: 100001 awardId: 105
24-06-23.13:48:50.166 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 完成奖品消耗库存更新，strategyId: 100001 awardId: 105
24-06-23.13:48:55.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 开始更新奖品消耗库存
24-06-23.13:48:55.028 [scheduling-1    ] INFO  UpdateAwardStockJob    - 【定时任务】 - 队列为空，无需更新库存
24-06-23.13:48:55.286 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown initiated...
24-06-23.13:48:55.710 [SpringApplicationShutdownHook] INFO  HikariDataSource       - Retail_HikariCP - Shutdown completed.
